### 角色设定 
请你扮演一位资深的后端架构师+业务分析师，具备丰富的业务代码拆解和流程梳理经验，擅长从代码中提炼核心逻辑、细节流程和业务规则，且能以清晰、易懂的结构化方式输出分析结果。 ### 分析目标 
请全面分析我提供的【XX服务】的业务代码，拆解代码中的**全量细节流程**和**核心业务规则**，要求覆盖正常流程、异常流程、边界条件、规则约束等所有关键维度，不遗漏核心逻辑。 ### 输入说明 
我会提供以下内容（可根据实际补充）： 
1. 该服务的代码文件/代码片段/代码仓库目录结构（附代码内容）； 
2. 该服务的核心功能描述（可选）； 
3. 技术栈说明（如Go/Java/Python、框架如Spring Boot/Gin等）。 
### 输出要求 
#### 1. 整体业务概览 
用100字以内总结该服务的核心业务目标、核心功能模块，以及各模块的核心交互关系。 
#### 2. 分模块业务流程分析（按代码模块/功能点拆分） 
对每个核心模块，按以下格式输出： 
- 模块名称：XXX 
- 核心功能：该模块实现的具体业务功能 
- 细节流程（步骤化）： 
	1. 输入：该模块的入参（参数名、类型、业务含义）、数据来源（如接口调用、数据库读取、消息队列）； 
	2. 核心处理步骤：按代码执行顺序拆解每一步逻辑（包括条件判断、循环、数据转换、调用其他模块/接口等）； 
	3. 输出：该模块的出参（参数名、类型、业务含义）、数据去向（如返回前端、写入数据库、发送消息）； 
	4. 异常处理：代码中针对哪些异常场景做了处理（如参数校验失败、数据库报错、接口调用超时），以及对应的处理逻辑（如返回错误码、重试、降级）； 
	5. 关键分支：代码中的核心条件分支（如if/else、switch），以及不同分支对应的业务场景和处理逻辑。 
#### 3. 核心业务规则提炼（结构化列举） 
从代码中提取所有显性/隐性的业务规则，按以下分类整理： 
- 数据校验规则：如参数的取值范围（如金额≥0）、格式要求（如手机号11位）、非空约束等； 
- 计算规则：如金额计算（含手续费/折扣）、状态流转的计算逻辑、统计类规则（如日累计上限）； 
- 状态流转规则：如订单从“待支付”→“已支付”→“已完成”的触发条件、不允许逆向流转的规则； 
- 权限/范围规则：如某接口仅允许管理员调用、数据仅能查询所属商户的信息； 
- 边界/限制规则：如单用户单日调用次数上限、订单超时自动取消的时间阈值； 
- 其他业务约束：如数据落库的字段规则、第三方接口调用的频率限制等。 
#### 4. 补充说明 
- 标注代码中的**关键易错点**：如未处理的异常、硬编码的业务值（如固定的折扣率）、可能引发逻辑问题的分支； 
- 标注**业务规则的代码映射**：每一条业务规则对应到具体的代码行/代码片段，便于核对； 
- 若存在不明确的逻辑（如代码注释缺失、逻辑模糊），请标注为“待确认”并给出你的推测。 
### 格式要求 
1. 所有输出使用中文，语言简洁、专业，避免冗余； 
2. 流程步骤用有序列表，规则用无序列表，核心内容用加粗强调； 
3. 可根据需要使用Mermaid流程图补充核心模块的流程（如：```mermaid flowchart TD 
                       A[接收前端请求] --> B[参数校验] 
                       B --> C{校验通过?} 
                       C -- 是 --> D[查询数据库] 
                       C -- 否 --> E[返回错误码] 
```）；
4. 输出内容分章节，章节标题清晰（如“一、整体业务概览”“二、用户下单模块流程分析”）。 
### 我的输入
1. 服务名称：上下文服务
2. 代码文件：选中的文件夹 
3. 补充说明：（小艺智能助手的上下文服务，增强功能的整体表现）
